# Техническое задание для собеседования в Wanted

## Вступление к заданию:
Для данного технического задания необходимо реализовать SQL-запрос и две функции на Java.  
Основной акцент сделан на работу с данными сотрудников и их родственников, а также на задачи по определению ближайших дат и преобразованию числовых значений в текстовую форму.

## Описание задания:


<summary><h2>Бонус</h2></summary>
Решение задачи 2.2 с помощью YaGptApi
`src/main/java/tasks/MoneyParserYGPTApi.java`


### Задание 1 (SQL):
Имеется две таблицы:
- `HPPersonGeneric` – таблица с персональными данными сотрудников и их родственников.
- `HPPersonDependant` – таблица с родственными связями.

**Необходимо написать SQL-запрос**, который выведет всех родственников (ФИО, дату рождения и тип родственной связи) для сотрудника с `personId = 'test'`.

> **Ответ находится по пути:**  
`src/main/resources/sql/query/select_family_connection.sql`

### Задание 2 (Java):

#### Подзадание 2.1:
Написать функцию, определяющую ближайшую дату отправки списка в страховую, где отправка осуществляется 1-го, 10-го и 20-го числа каждого месяца в 18:00.  
Если дата попадает на выходной или праздничный день, отправка переносится на предыдущий рабочий день.

<details>
<summary>Описание решения задачи 2.1</summary>

В классе `SellersListDate` реализована функция `dateOfShipment()`, которая определяет ближайшую дату отправки списка в страховую компанию.

Основные этапы решения:
- Текущая дата и время получаются с помощью `LocalDateTime.now()`.
- Определяются три даты отправки в текущем месяце: 1-е, 10-е и 20-е числа в 18:00.
- В зависимости от текущего времени выбирается ближайшая дата отправки:
    - Если текущее время после 1-го, но до 10-го, выбирается 10-е число.
    - Если текущее время после 10-го, но до 20-го, выбирается 20-е число.
    - Если текущее время позже 20-го числа, дата отправки переносится на 1-е число следующего месяца.
- Затем вызывается метод `getVacCheck()`, который проверяет, является ли выбранная дата рабочим днём. Если нет, дата отправки корректируется на предыдущий рабочий день.
- Метод `getVacCheck()` рекурсивно проверяет, является ли дата рабочей, и, если необходимо, ищет ближайший следующий рабочий день.

Таким образом, функция возвращает корректную дату отправки списка с учётом выходных дней.

</details>

#### Подзадание 2.2:
Написать функцию, которая возвращает сумму в виде строки (прописью) для значения до 99 999.99.

<details>
<summary>Описание решения задачи 2.2</summary>

В классе `MoneyParser` реализована функция `priceAlphabeticView(BigDecimal price)`, которая преобразует числовое значение суммы в текстовое описание (прописью).

Основные шаги решения:
- **Основная функция**:
    - Сумма разделяется на целую и дробную части.
    - Для целой части вызывается метод `numParserWhole()`, который преобразует число в пропись.
    - Для дробной части вызывается метод `numParserDecimal()`, который аналогично преобразует число в копейки.

- **Метод `numParserWhole(BigInteger num)`**:
    - Обрабатывает суммы до 100 000 рублей, разбивая их на тысячи, сотни, десятки и единицы.
    - Используются массивы строк для чисел до 20, десятков, сотен и тысяч. Для каждого сегмента числа выбирается соответствующее текстовое представление.
    - В конце добавляется правильная форма слова "рубль" в зависимости от числа (рубль, рубля, рублей).

- **Метод `numParserDecimal(BigInteger num)`**:
    - Преобразует дробную часть суммы (копейки).
    - Для чисел до 20 используются особые формы слов "копейка", "копейки", "копеек", в зависимости от значения дробной части.

Таким образом, функция возвращает сумму прописью, учитывая грамматические особенности русского языка для чисел и единиц денежных сумм.

</details>
